#!/bin/bash

# This script was installed as part of docker-ansible.
# More info here:
#   https://github.com/j842/docker-ansible

# determine where pwd is in terms of the ansible container
ANSIBLE_PATH="${PATH}"
ANSIBLE_VCMD="${ANSIBLE_PATH}:${ANSIBLE_MOUNT}"
ANSIBLE_DIR=$(${GETPATH} ${PATH})
if [ \$? -ne 0 ]; then exit 1 ; fi

# run the command in the container
docker run --name=ansible -ti                           \
       -v "${VOLUME_VCMD}" -v "${ANSIBLE_VCMD}"         \
       ${CONTAINER_NAME} ${BINDIR}/ansiblerun ${ANSIBLE_DIR} ${1} \$@
docker rm ansible  > /dev/null
